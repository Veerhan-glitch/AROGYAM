<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Summaries - Arogyam</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .summaries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-card {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .summary-card h3 {
            margin-top: 0;
            font-size: 18px;
            color: #333;
        }
        
        .summary-card p {
            color: #666;
            margin: 5px 0;
            font-size: 14px;
        }
        
        .summary-date {
            color: #888;
            font-size: 13px;
            margin-bottom: 15px;
        }
        
        .summary-tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
            color: white;
        }
        
        .tag-chronic {
            background-color: #e74c3c;
        }
        
        .tag-checkup {
            background-color: #3498db;
        }
        
        .tag-followup {
            background-color: #2ecc71;
        }
        
        .tag-emergency {
            background-color: #f39c12;
        }
        
        .summary-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 15px;
        }
        
        .summary-actions button {
            border: none;
            background: none;
            color: #3498db;
            cursor: pointer;
            margin-left: 15px;
            font-size: 14px;
        }
        
        .summary-actions button:hover {
            color: #2980b9;
        }
        
        .filter-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .filter-dropdown {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #888;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ddd;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 70%;
            max-width: 800px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            color: #aaa;
            cursor: pointer;
        }
        
        .close-btn:hover {
            color: #333;
        }
        
        .summary-detail h2 {
            margin-top: 0;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .summary-section {
            margin-bottom: 25px;
        }
        
        .summary-section h3 {
            font-size: 18px;
            color: #444;
            margin-bottom: 10px;
        }
        
        .conditions-list, .medications-list {
            list-style-type: none;
            padding: 0;
        }
        
        .conditions-list li, .medications-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f2f2f2;
        }
        
        .vital-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .vital-item {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }
        
        .vital-item h4 {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: #666;
        }
        
        .vital-value {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        
        .vital-unit {
            font-size: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <div class="logo">
                    <a href="../index.html">Arogyam</a>
                </div>
                <ul class="nav-links">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="appointments.html">Appointments</a></li>
                    <li><a href="lab-tests.html">Lab Tests</a></li>
                    <li><a href="prescriptions.html">Prescriptions</a></li>
                    <li class="active"><a href="medical-summaries.html">Medical Summaries</a></li>
                    <li><a href="medical-records.html">Medical Records</a></li>
                    <li><a href="cart.html"><i class="fas fa-shopping-cart"></i></a></li>
                    <li class="profile-icon"><a href="profile.html"><i class="fas fa-user-circle"></i></a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section class="page-header">
                <h1>Medical Summaries</h1>
                <p>View and manage your medical summaries from your healthcare providers</p>
            </section>

            <section class="filter-container">
                <input type="text" id="search-input" class="search-input" placeholder="Search summaries...">
                <select id="filter-type" class="filter-dropdown">
                    <option value="all">All Types</option>
                    <option value="chronic">Chronic Condition</option>
                    <option value="checkup">Regular Checkup</option>
                    <option value="followup">Follow-up Visit</option>
                    <option value="emergency">Emergency Visit</option>
                </select>
                <select id="filter-date" class="filter-dropdown">
                    <option value="all">All Time</option>
                    <option value="month">Last Month</option>
                    <option value="quarter">Last 3 Months</option>
                    <option value="year">Last Year</option>
                </select>
            </section>

            <section class="summaries-container">
                <div id="summaries-grid" class="summaries-grid">
                    <!-- Summary cards will be loaded here -->
                </div>
                <div id="empty-state" class="empty-state" style="display: none;">
                    <i class="fas fa-file-medical-alt"></i>
                    <h3>No Medical Summaries Found</h3>
                    <p>You don't have any medical summaries at the moment.</p>
                </div>
            </section>
        </main>

        <!-- Summary Detail Modal -->
        <div id="summary-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div id="summary-detail" class="summary-detail">
                    <!-- Summary details will be loaded here -->
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>Arogyam</h2>
                    <p>Your health, our priority</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="appointments.html">Appointments</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-phone"></i> +91 1234567890</p>
                    <p><i class="fas fa-envelope"></i> info@arogyam.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> 123, Health Street, Wellness City</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Arogyam. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadMedicalSummaries();
            
            // Event listeners
            document.getElementById('search-input').addEventListener('input', filterSummaries);
            document.getElementById('filter-type').addEventListener('change', filterSummaries);
            document.getElementById('filter-date').addEventListener('change', filterSummaries);
            
            // Modal close button
            document.querySelector('.close-btn').addEventListener('click', function() {
                document.getElementById('summary-modal').style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target == document.getElementById('summary-modal')) {
                    document.getElementById('summary-modal').style.display = 'none';
                }
            });
        });
        
        // Sample data for medical summaries
        function getMedicalSummaries() {
            return [
                {
                    id: 1,
                    title: "Annual Physical Examination",
                    doctor: "Dr. Rajesh Kumar",
                    date: "2023-10-15",
                    type: "checkup",
                    description: "Comprehensive annual health assessment",
                    conditions: ["Mild hypertension", "Vitamin D deficiency"],
                    medications: [
                        { name: "Amlodipine", dosage: "5mg", instructions: "Once daily" },
                        { name: "Vitamin D3", dosage: "60,000 IU", instructions: "Once a week for 8 weeks" }
                    ],
                    vitals: {
                        bloodPressure: "130/85 mmHg",
                        heartRate: "78 bpm",
                        temperature: "98.6°F",
                        oxygenSaturation: "98%",
                        weight: "74 kg",
                        height: "175 cm",
                        bmi: "24.2"
                    },
                    recommendations: "Reduce salt intake, regular exercise 30 minutes daily, follow-up in 3 months"
                },
                {
                    id: 2,
                    title: "Diabetes Management",
                    doctor: "Dr. Priya Sharma",
                    date: "2023-09-05",
                    type: "chronic",
                    description: "Quarterly diabetes check-up and management",
                    conditions: ["Type 2 Diabetes", "Dyslipidemia"],
                    medications: [
                        { name: "Metformin", dosage: "500mg", instructions: "Twice daily with meals" },
                        { name: "Glimepiride", dosage: "2mg", instructions: "Once daily before breakfast" },
                        { name: "Atorvastatin", dosage: "10mg", instructions: "Once daily at bedtime" }
                    ],
                    vitals: {
                        bloodPressure: "125/80 mmHg",
                        heartRate: "72 bpm",
                        temperature: "98.4°F",
                        fbs: "142 mg/dL",
                        ppbs: "187 mg/dL",
                        hba1c: "7.2%",
                        weight: "78 kg"
                    },
                    recommendations: "Continue current medications, monitor blood glucose daily, low carbohydrate diet"
                },
                {
                    id: 3,
                    title: "Post-Surgery Follow-up",
                    doctor: "Dr. Vivek Malhotra",
                    date: "2023-11-20",
                    type: "followup",
                    description: "Follow-up visit after appendectomy",
                    conditions: ["Post-operative recovery"],
                    medications: [
                        { name: "Paracetamol", dosage: "650mg", instructions: "As needed for pain, not exceeding 3 times a day" }
                    ],
                    vitals: {
                        bloodPressure: "120/75 mmHg",
                        heartRate: "80 bpm",
                        temperature: "98.8°F",
                        oxygenSaturation: "99%"
                    },
                    recommendations: "Wound is healing well, resume normal activities gradually, avoid heavy lifting for 4 weeks"
                },
                {
                    id: 4,
                    title: "Acute Bronchitis Treatment",
                    doctor: "Dr. Anand Patil",
                    date: "2023-08-12",
                    type: "emergency",
                    description: "Treatment for acute bronchitis with fever",
                    conditions: ["Acute bronchitis", "Upper respiratory infection"],
                    medications: [
                        { name: "Azithromycin", dosage: "500mg", instructions: "Once daily for 3 days" },
                        { name: "Dextromethorphan", dosage: "30mg", instructions: "Every 6 hours as needed for cough" },
                        { name: "Paracetamol", dosage: "650mg", instructions: "Every 6 hours as needed for fever" }
                    ],
                    vitals: {
                        bloodPressure: "118/78 mmHg",
                        heartRate: "92 bpm",
                        temperature: "100.4°F",
                        oxygenSaturation: "95%",
                        respiratoryRate: "22/min"
                    },
                    recommendations: "Rest, increase fluid intake, follow-up if symptoms persist beyond 7 days"
                },
                {
                    id: 5,
                    title: "Hypertension Review",
                    doctor: "Dr. Meena Gupta",
                    date: "2023-07-25",
                    type: "chronic",
                    description: "Regular monitoring of hypertension",
                    conditions: ["Essential hypertension", "Obesity"],
                    medications: [
                        { name: "Telmisartan", dosage: "40mg", instructions: "Once daily in the morning" },
                        { name: "Hydrochlorothiazide", dosage: "12.5mg", instructions: "Once daily in the morning" }
                    ],
                    vitals: {
                        bloodPressure: "145/90 mmHg",
                        heartRate: "76 bpm",
                        weight: "82 kg",
                        bmi: "27.8"
                    },
                    recommendations: "Increase medication dosage, reduce weight by 5kg, restrict salt intake, follow DASH diet"
                }
            ];
        }
        
        function loadMedicalSummaries() {
            const summaries = getMedicalSummaries();
            const summariesGrid = document.getElementById('summaries-grid');
            const emptyState = document.getElementById('empty-state');
            
            if (summaries.length === 0) {
                summariesGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            summariesGrid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            summariesGrid.innerHTML = '';
            summaries.forEach(summary => {
                const card = createSummaryCard(summary);
                summariesGrid.appendChild(card);
            });
        }
        
        function createSummaryCard(summary) {
            const card = document.createElement('div');
            card.className = 'summary-card';
            card.dataset.id = summary.id;
            card.dataset.type = summary.type;
            card.dataset.date = summary.date;
            
            const typeLabel = getTypeLabel(summary.type);
            const typeClass = `tag-${summary.type}`;
            
            const date = new Date(summary.date);
            const formattedDate = date.toLocaleDateString('en-IN', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
            
            card.innerHTML = `
                <div class="summary-tag ${typeClass}">${typeLabel}</div>
                <h3>${summary.title}</h3>
                <p class="summary-date">${formattedDate}</p>
                <p><strong>Doctor:</strong> ${summary.doctor}</p>
                <p>${summary.description}</p>
                <div class="summary-actions">
                    <button onclick="viewSummaryDetail(${summary.id})"><i class="fas fa-eye"></i> View</button>
                    <button onclick="downloadSummary(${summary.id})"><i class="fas fa-download"></i> Download</button>
                    <button onclick="shareSummary(${summary.id})"><i class="fas fa-share-alt"></i> Share</button>
                </div>
            `;
            
            return card;
        }
        
        function getTypeLabel(type) {
            switch(type) {
                case 'chronic': return 'Chronic Condition';
                case 'checkup': return 'Regular Checkup';
                case 'followup': return 'Follow-up Visit';
                case 'emergency': return 'Emergency Visit';
                default: return 'Other';
            }
        }
        
        function filterSummaries() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const typeFilter = document.getElementById('filter-type').value;
            const dateFilter = document.getElementById('filter-date').value;
            
            const cards = document.querySelectorAll('.summary-card');
            let visibleCount = 0;
            
            cards.forEach(card => {
                const cardText = card.textContent.toLowerCase();
                const cardType = card.dataset.type;
                const cardDate = new Date(card.dataset.date);
                const now = new Date();
                
                let showCard = cardText.includes(searchTerm);
                
                // Apply type filter
                if (typeFilter !== 'all' && cardType !== typeFilter) {
                    showCard = false;
                }
                
                // Apply date filter
                if (dateFilter !== 'all') {
                    let dateThreshold = new Date();
                    
                    if (dateFilter === 'month') {
                        dateThreshold.setMonth(now.getMonth() - 1);
                    } else if (dateFilter === 'quarter') {
                        dateThreshold.setMonth(now.getMonth() - 3);
                    } else if (dateFilter === 'year') {
                        dateThreshold.setFullYear(now.getFullYear() - 1);
                    }
                    
                    if (cardDate < dateThreshold) {
                        showCard = false;
                    }
                }
                
                if (showCard) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show/hide empty state
            document.getElementById('empty-state').style.display = visibleCount === 0 ? 'block' : 'none';
        }
        
        function viewSummaryDetail(id) {
            const summaries = getMedicalSummaries();
            const summary = summaries.find(s => s.id === id);
            
            if (!summary) return;
            
            const modal = document.getElementById('summary-modal');
            const detailContainer = document.getElementById('summary-detail');
            
            const date = new Date(summary.date);
            const formattedDate = date.toLocaleDateString('en-IN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const typeLabel = getTypeLabel(summary.type);
            
            // Create medications list HTML
            let medicationsHtml = '<ul class="medications-list">';
            summary.medications.forEach(med => {
                medicationsHtml += `<li><strong>${med.name}</strong> (${med.dosage}) - ${med.instructions}</li>`;
            });
            medicationsHtml += '</ul>';
            
            // Create conditions list HTML
            let conditionsHtml = '<ul class="conditions-list">';
            summary.conditions.forEach(condition => {
                conditionsHtml += `<li>${condition}</li>`;
            });
            conditionsHtml += '</ul>';
            
            // Create vitals HTML
            let vitalsHtml = '<div class="vital-grid">';
            for (const [key, value] of Object.entries(summary.vitals)) {
                const label = formatVitalLabel(key);
                vitalsHtml += `
                    <div class="vital-item">
                        <h4>${label}</h4>
                        <div class="vital-value">${value}</div>
                    </div>
                `;
            }
            vitalsHtml += '</div>';
            
            detailContainer.innerHTML = `
                <h2>${summary.title}</h2>
                <p><strong>Date:</strong> ${formattedDate} | <strong>Type:</strong> ${typeLabel}</p>
                <p><strong>Doctor:</strong> ${summary.doctor}</p>
                
                <div class="summary-section">
                    <h3>Description</h3>
                    <p>${summary.description}</p>
                </div>
                
                <div class="summary-section">
                    <h3>Conditions</h3>
                    ${conditionsHtml}
                </div>
                
                <div class="summary-section">
                    <h3>Medications</h3>
                    ${medicationsHtml}
                </div>
                
                <div class="summary-section">
                    <h3>Vital Signs</h3>
                    ${vitalsHtml}
                </div>
                
                <div class="summary-section">
                    <h3>Recommendations</h3>
                    <p>${summary.recommendations}</p>
                </div>
                
                <div class="summary-actions" style="margin-top: 30px;">
                    <button onclick="downloadSummary(${summary.id})"><i class="fas fa-download"></i> Download PDF</button>
                    <button onclick="shareSummary(${summary.id})"><i class="fas fa-share-alt"></i> Share</button>
                    <button onclick="printSummary(${summary.id})"><i class="fas fa-print"></i> Print</button>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function formatVitalLabel(key) {
            const labels = {
                bloodPressure: 'Blood Pressure',
                heartRate: 'Heart Rate',
                temperature: 'Temperature',
                oxygenSaturation: 'O₂ Saturation',
                weight: 'Weight',
                height: 'Height',
                bmi: 'BMI',
                fbs: 'Fasting Glucose',
                ppbs: 'Post-Prandial Glucose',
                hba1c: 'HbA1c',
                respiratoryRate: 'Respiratory Rate'
            };
            
            return labels[key] || key.charAt(0).toUpperCase() + key.slice(1);
        }
        
        // Placeholder functions for actions
        function downloadSummary(id) {
            alert('Download functionality would be implemented here. This would generate a PDF of summary #' + id);
        }
        
        function shareSummary(id) {
            alert('Share functionality would be implemented here. This would allow sharing summary #' + id + ' with other healthcare providers');
        }
        
        function printSummary(id) {
            alert('Print functionality would be implemented here. This would print summary #' + id);
        }
    </script>
</body>
</html> 